{"version":3,"sources":["../src/create_controls.js"],"names":["window","onload","history","forward","addSpinners","distribution","Log","debug","find","each","addClass","children","e","beforeunloadHandler","addEventListener","event","preventDefault","init","created","StudentCopyControls"],"mappings":"yfA6BA,uDACA,OACA,O,siBAGAA,MAAM,CAACC,MAAP,CAAgBD,MAAM,CAACE,OAAP,CAAeC,OAAf,EAAhB,C,GAMMC,CAAAA,CAAW,CAAG,SAACC,CAAD,CAAkB,CACpCC,CAAG,CAACC,KAAJ,CAAU,oBAAV,EACAD,CAAG,CAACC,KAAJ,CAAUF,CAAV,EAEA,GAAoB,uBAAhB,EAAAA,CAAJ,CAA6C,CAC3C,cAAE,OAAF,EACGG,IADH,CACQ,mBADR,EAEGC,IAFH,CAEQ,UAAY,CAChB,cAAE,gBAAF,EAAoBC,QAApB,CAA6B,sBAA7B,CACD,CAJH,CAKD,CAND,IAMO,CACL,cAAE,OAAF,EACGC,QADH,GAEGF,IAFH,CAEQ,SAAUG,CAAV,CAAa,CACjB,GAAoB,YAAhB,EAAAP,CAAJ,CAAkC,CAChC,cAAE,SAAWO,CAAb,EAAgBF,QAAhB,CAAyB,sBAAzB,CACD,CACF,CANH,CAOD,CACF,C,CAEKG,CAAmB,CAAG,UAAM,CAChCb,MAAM,CAACc,gBAAP,CAAwB,cAAxB,CAAwC,SAACC,CAAD,CAAW,CACjDA,CAAK,CAACC,cAAN,EACD,CAFD,CAGD,C,CAEYC,CAAI,CAAG,SAACC,CAAD,CAAUb,CAAV,CAA2B,CAC7CC,CAAG,CAACC,KAAJ,CAAU,yDAAV,EACAD,CAAG,CAACC,KAAJ,CAAUF,CAAV,CAAwBa,CAAxB,EAGA,GAAI,CAACA,CAAL,CAAc,CACZL,CAAmB,GACnBT,CAAW,CAACC,CAAD,CAAX,CAEAc,CAAmB,CAACF,IAApB,CAAyBZ,CAAzB,CACD,CACF,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Provides the mod_googleactivity/created_control module\n *\n * @package   mod_googleactivity\n * @category  output\n * @copyright 2021 Veronica Bermegui\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module mod_googleactivity/controls\n *\n */\n\nimport $ from \"jquery\";\nimport * as Log from \"core/log\";\nimport * as StudentCopyControls from \"mod_googleactivity/student_copy_controls\";\n\n// Prevent user from going backwards.\nwindow.onload = window.history.forward();\n\n/**\n *\n * @param {*} distribution\n */\nconst addSpinners = (distribution) => {\n  Log.debug(\"Adding spinners...\");\n  Log.debug(distribution);\n\n  if (distribution == \"dist_share_same_group\") {\n    $(\"tbody\")\n      .find(\"[data-group-name]\")\n      .each(function () {\n        $(\"div#status_col\").addClass(\"spinner-border color\");\n      });\n  } else {\n    $(\"tbody\")\n      .children()\n      .each(function (e) {\n        if (distribution != \"group_copy\") {\n          $(\"#file_\" + e).addClass(\"spinner-border color\");\n        }\n      });\n  }\n};\n\nconst beforeunloadHandler = () => {\n  window.addEventListener(\"beforeunload\", (event) => {\n    event.preventDefault();\n  });\n};\n\nexport const init = (created, distribution) => {\n  Log.debug(\"mod_googleactivity: initializing mod_googledocs control\");\n  Log.debug(distribution, created);\n\n  // Its not createdd. Add spinners and block events.\n  if (!created) {\n    beforeunloadHandler();\n    addSpinners(distribution);\n\n    StudentCopyControls.init(distribution);\n  }\n};\n"],"file":"create_controls.min.js"}