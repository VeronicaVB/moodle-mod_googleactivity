{"version":3,"sources":["../src/student_copy_controls.js"],"names":["getStudentsDetails","Log","debug","students","children","each","studentId","attr","studentEmail","studentName","push","createStudentFileCopyService","distribution","Ajax","call","methodname","args","JSON","stringify","instanceid","done","response","records","parse","reduce","a","b","concat","status","renderingHandler","fail","reason","error","renderShareSameGroup","renderCopyResults","renderCopyGroup","renderShareSameGrouping","renderGroupGroupingCopy","i","tablerows","document","querySelectorAll","getAttribute","record","find","userid","creationStatus","creationstat","message","creation_status","querySelector","href","url","classList","remove","innerText","length","hasAttribute","groupId","groupid","groupingId","groupingid","failedStat","stat","warningInfo","gId","gType","div","createElement","table","add","text","createTextNode","appendChild","insertAdjacentElement","init"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Provides the mod_googleactivity/student_copy_controls module\n *\n * Contains the functionality for distribution types student gets own copy (std_copy)\n * and students share same copy (dist_share_same)\n *\n * @package   mod_googleactivity\n * @category  output\n * @copyright 2021 Veronica Bermegui\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module mod_googleactivity/student_copy_controls\n *\n */\n\nimport $ from \"jquery\";\nimport * as Log from \"core/log\";\nimport Ajax from \"core/ajax\";\n\nconst getStudentsDetails = () => {\n  Log.debug(\"Collecting students details ...\");\n  let students = [];\n\n  $(\"tbody\")\n    .children()\n    .each(function () {\n      const studentId = $(this).attr(\"data-student-id\");\n      const studentEmail = $(this).attr(\"data-student-email\");\n      const studentName = $(this).attr(\"student-name\");\n      // Only add elements with values. undefined return false.\n      if (studentId && studentEmail && studentName) {\n        students.push({\n          studentId: studentId,\n          studentEmail: studentEmail,\n          studentName: studentName,\n        });\n      }\n    });\n\n  return students;\n};\n\nconst createStudentFileCopyService = (distribution) => {\n  Log.debug(\"In createStudentFileCopyService...\");\n\n  Ajax.call([\n    {\n      methodname: \"mod_googleactivity_create_students_files\",\n      args: {\n        students: JSON.stringify(getStudentsDetails()),\n        instanceid: $(\"table.overviewTable\").attr(\"data-instance-id\"),\n      },\n      done: function (response) {\n        var records = JSON.parse(response.records);\n        // Combine the results.\n        records = records.reduce(function (a, b) {\n          return a.concat(b);\n        }, []);\n\n        var status = JSON.parse(response.status);\n        // Combine the results.\n        status = status.reduce(function (a, b) {\n          return a.concat(b);\n        }, []);\n\n        Log.debug(status);\n        renderingHandler(records, distribution, status);\n      },\n      fail: function (reason) {\n        Log.error(reason);\n      },\n    },\n  ]);\n};\n\nconst renderingHandler = (records, distribution, status) => {\n  if (distribution == \"group_copy\" || distribution == \"dist_share_same_group\") {\n    renderShareSameGroup(records, distribution, status);\n  }\n\n  if (distribution == \"std_copy\" || distribution == \"dist_share_same\") {\n    renderCopyResults(records, status);\n  }\n\n  if (\n    distribution == \"std_copy_group\" ||\n    distribution == \"std_copy_grouping\" ||\n    distribution == \"std_copy_group_grouping\"\n  ) {\n    renderCopyGroup(records, status);\n  }\n\n  if (distribution == \"dist_share_same_grouping\") {\n    renderShareSameGrouping(records, status);\n  }\n\n  if (\n    distribution == \"group_grouping_copy\" ||\n    distribution == \"dist_share_same_group_grouping\"\n  ) {\n    renderGroupGroupingCopy(records, status);\n  }\n};\n\n/**\n *\n * @param {*} records\n * @param {*} status\n */\nconst renderCopyResults = (records, status) => {\n  Log.debug(\"Rendering results ...\");\n  let i;\n  const tablerows = document.querySelectorAll(\"#table-body tr\");\n\n  for (i = 0; i < tablerows.length; i++) {\n    let studentId = tablerows[i].getAttribute(\"data-student-id\");\n    let record = records.find((record) => record.userid == studentId);\n    let creationStatus = status.find(\n      (creationstat) => creationstat.userid == studentId\n    );\n    let message = \"\";\n\n    if (!record) {\n      message = \"Failed\";\n      Log.debug(\n        \"StudentId:  \" +\n          studentId +\n          \"Creation status: \" +\n          creationStatus.creation_status\n      );\n    } else {\n      tablerows[i].querySelector(\"#link_file_\" + i).href = record.url;\n      message = \"Created\";\n    }\n    tablerows[i].querySelector(\"#file_\" + i).classList.remove(\"spinner-border\");\n    tablerows[i].querySelector(\"#file_\" + i).innerText = message;\n  }\n};\n\nconst renderCopyGroup = (records, status) => {\n  Log.debug(\"In renderCopyGroup...\");\n\n  Log.debug(status);\n  let i;\n  const tablerows = document.querySelectorAll(\"#table-body tr\");\n\n  for (i = 0; i < tablerows.length; i++) {\n    let studentId = tablerows[i].getAttribute(\"data-student-id\");\n    let record = records.find((record) => record.userid == studentId);\n    let creationStatus = status.find(\n      (creationstat) => creationstat.userid == studentId\n    );\n    let message = \"\";\n\n    if (!record) {\n      message = \"Failed\";\n      Log.debug(\n        \"StudentId:  \" +\n          studentId +\n          \"Creation status: \" +\n          creationStatus.creation_status\n      );\n    } else {\n      tablerows[i].querySelector(\"#link_file_\" + i).href = record.url;\n      message = \"Created\";\n    }\n\n    tablerows[i].querySelector(\"#file_\" + i).classList.remove(\"spinner-border\");\n    tablerows[i].querySelector(\"#file_\" + i).innerText = message;\n  }\n};\n\nconst renderShareSameGroup = (records, status) => {\n  Log.debug(\"In renderShareSameGroup...\");\n  let i;\n  const tablerows = document.querySelectorAll(\"#table-body tr\");\n\n  for (i = 0; i < tablerows.length; i++) {\n    if (tablerows[i].hasAttribute(\"id\")) {\n      let groupId = tablerows[i].getAttribute(\"data-group-id\");\n      let record = records.find((record) => record.groupid == groupId);\n\n      tablerows[i].querySelector(\"#shared_link_url_\" + record.groupid).href =\n        record.url;\n      tablerows[i]\n        .querySelector(\"#status_col\")\n        .classList.remove(\"spinner-border\");\n      tablerows[i].querySelector(\"#status_col\").innerText = \"Created\";\n    }\n  }\n};\n\nconst renderShareSameGrouping = (records, status) => {\n  Log.debug(\"In renderShareSameGrouping...\");\n\n  Log.debug(records);\n  Log.debug(status);\n  let i;\n\n  const tablerows = document.querySelectorAll(\"#table-body tr\");\n\n  for (i = 0; i < tablerows.length; i++) {\n    if (tablerows[i].hasAttribute(\"id\")) {\n      let groupingId = tablerows[i].getAttribute(\"data-grouping-id\");\n      let record = records.find((record) => record.groupingid == groupingId);\n      let failedStat = status.find((stat) => stat.creation_status != \"OK\");\n      let message = \"\";\n\n      if (failedStat) {\n        warningInfo();\n      }\n      if (!record) {\n        message = \"Failed\";\n        Log.debug(\n          \"groupingId:  \" + groupingId + \"Creation status: \" + failedStat\n        );\n      } else {\n        message = \"Created\";\n        tablerows[i].querySelector(\n          \"#shared_link_url_\" + record.groupingid\n        ).href = record.url;\n      }\n\n      tablerows[i]\n        .querySelector(\"#status_col_\" + groupingId)\n        .classList.remove(\"spinner-border\");\n      tablerows[i].querySelector(\n        \"#status_col_\" + groupingId\n      ).innerText = message;\n    }\n  }\n};\n\nconst renderGroupGroupingCopy = (records, status) => {\n  Log.debug(\"In renderGroupGroupingCopy...\");\n\n  Log.debug(records);\n  let i;\n\n  const tablerows = document.querySelectorAll(\"#table-body tr\");\n\n  for (i = 0; i < tablerows.length; i++) {\n    if (tablerows[i].hasAttribute(\"id\")) {\n      let gId = tablerows[i].getAttribute(\"data-g-id\");\n      let gType = tablerows[i].getAttribute(\"data-g-type\");\n      let record;\n      let failedStat = status.find((stat) => stat.creation_status != \"OK\");\n      let message = \"\";\n\n      if (failedStat) {\n        warningInfo();\n      }\n\n      if (gType == \"grouping\") {\n        record = records.find((record) => record.groupingid == gId);\n        if (!record) {\n          message = \"Failed\";\n        } else {\n          tablerows[i].querySelector(\n            \"#shared_link_url_\" + record.groupingid\n          ).href = record.url;\n        }\n      } else {\n        record = records.find((record) => record.groupid == gId);\n\n        if (!records) {\n          message = \"Failed\";\n        }\n\n        tablerows[i].querySelector(\"#shared_link_url_\" + record.groupid).href =\n          record.url;\n      }\n\n      tablerows[i]\n        .querySelector(\"#status_col_\" + gId)\n        .classList.remove(\"spinner-border\");\n      tablerows[i].querySelector(\"#status_col_\" + gId).innerText = message;\n    }\n  }\n};\n\n// Warning tag\n\nconst warningInfo = () => {\n  let div = document.createElement(\"div\");\n  let table = document.querySelector(\"table.mod-googleactivity-files-view\");\n  div.classList.add(\"alert\");\n  div.classList.add(\"alert-warning\");\n  let text = document.createTextNode(\n    \"There were some errors in the process...\"\n  );\n  div.appendChild(text);\n  table.insertAdjacentElement(\"afterEnd\", div);\n};\n\nexport const init = (distribution) => {\n  createStudentFileCopyService(distribution);\n};\n"],"file":"student_copy_controls.min.js"}